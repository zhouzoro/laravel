{"version":3,"sources":["main.babeled.min.js","main.babeled.js"],"names":["setLogin","Cookies","get","console","log","$","click","remove","window","location","addClass","xhr","XMLHttpRequest","open","onload","res","JSON","parse","responseText","status","text","css","background","color","border","id","set","expires","formData","FormData","send","setReplistNav","$list","listPos","listLen","length","currentPos","up","down","setInfoNav","width","height","this","data","toggleSidebar","sidebar","ScrollTop","body","stop","animate","scrollTop","showScrollTop","checkVisible","removeClass","changeToolBarPosition","$mceToolbar","$editorOps","elm","evalType","vpH","st","y","offset","top","elementHeight","scrollTo","eleId","document","ready","scroll","hover","popup","position","on","scrollStatus","scrollRecord","init","setPosition","recordScroll","direction","continuous","adaptResize","resize"],"mappings":"AAAA,YCsBA,SAASA,YACDC,QAAQC,IAAI,OACZC,QAAQC,IAAIH,QAAQC,IAAI,OACxBG,EAAE,YAAYC,MAAM,WAChBL,QAAQM,OAAO,MACfC,OAAOC,SAAW,MAEtBJ,EAAE,oBAAoBK,SAAS,aAE3BL,EAAE,eAAe,IACjBA,EAAE,eAAeC,MAAM,WACnB,GAAIK,GAAM,GAAIC,eACdD,GAAIE,KAAK,OAAQ,WAEjBF,EAAIG,OAAS,WAET,GAAIC,GAAMC,KAAKC,MAAMN,EAAIO,aACzBf,SAAQC,IAAIW,GACM,UAAdA,EAAII,QACJd,EAAE,iBAAiBe,KAAK,QAAQC,KAC5BC,WAAc,sBACdC,MAAS,QACTC,OAAU,oBAEdrB,QAAQC,IAAIW,GACZZ,QAAQC,IAAIW,EAAIU,IAChBxB,QAAQyB,IAAI,KAAMX,EAAIU,IAAME,QAAS,KAErCtB,EAAE,iBAAiBe,KAAK,QAAQC,KAC5BC,WAAc,sBACdC,MAAS,MACTC,OAAU,kBAItB,IAAII,GAAW,GAAIC,UAASxB,EAAE,eAAe,GAC7CM,GAAImB,KAAKF,KAMzB,QAASG,iBACL,GAAK1B,EAAE,0BAA0B,GAEjC,CAAA,GAAI2B,GAAQ3B,EAAE,sBACV4B,EAAU,WACV,GAAIC,GAAU7B,EAAE,4BAA4B8B,OACxCC,EAAa,CACjB,QACIC,GAAI,WACID,EAAa,EACbA,GAA0B,EAE1BA,EAAa,EAEjBJ,EAAMX,IAAI,YAAa,cAAmC,KAAlB,EAAIe,GAAoB,QAGpEE,KAAM,WACEJ,EAAUE,EAAa,EACvBA,GAA0B,EAE1BA,EAAaF,EAAU,EAE3BF,EAAMX,IAAI,YAAa,cAAmC,KAAlB,EAAIe,GAAoB,WAIlE/B,GAAE,6BAA6BC,MAAM2B,EAAQI,IAC3ChC,EAAE,+BAA+BC,MAAM2B,EAAQK,OAG/D,QAASC,cACL,GAAKlC,EAAE,gBAAgB,GAAvB,CACA,GAAI2B,GAAQ3B,EAAE,qBACdA,GAAE,uBAAuBC,MAAM,WAC3B,GAAIkC,GAAQnC,EAAE,iBAAiBoC,QAC/BtC,SAAQC,IAAIoC,GACZrC,QAAQC,IAAIC,EAAEqC,OACdV,EAAMX,IAAI,YAAa,cAA8C,MAA7BhB,EAAEqC,MAAMC,KAAK,SAAW,GAAY,UAiCpF,QAASC,iBACLvC,EAAE,YAAYwC,QAAQ,UAG1B,QAASC,aACL,GAAIC,GAAO1C,EAAE,aACb0C,GAAKC,OAAOC,SACRC,UAAW,GACZ,OAGP,QAASC,iBACAC,aAAa/C,EAAE,oBAIhBA,EAAE,gBAAgBgD,YAAY,UAAU3C,SAAS,UACjDL,EAAE,eAAegD,YAAY,MAAM3C,SAAS,SAJ5CL,EAAE,gBAAgBgD,YAAY,UAAU3C,SAAS,UACjDL,EAAE,eAAegD,YAAY,OAAO3C,SAAS,OAOrD,QAAS4C,yBACL,GAAIC,GAAclD,EAAE,4EAChBmD,EAAanD,EAAE,OACfkD,GAAY,KACPH,aAAa/C,EAAE,uBAGhBkD,EAAYF,YAAY,UAFxBE,EAAY7C,SAAS,WAKzB8C,EAAW,KACNJ,aAAa/C,EAAE,WAGhBmD,EAAWH,YAAY,UAFvBG,EAAW9C,SAAS,WAOhC,QAAS0C,cAAaK,EAAKC,GACvBA,EAAWA,GAAY,SAEvB,IAAIC,GAAMtD,EAAEG,QAAQiC,SAIhBmB,EAAKvD,EAAEG,QAAQ0C,YAIfW,EAAIxD,EAAEoD,GAAKK,SAASC,IACpBC,EAAgB3D,EAAEoD,GAAKhB,QAE3B,OAAiB,YAAbiB,EAAmCC,EAAMC,EAAVC,GAAgBA,EAAID,EAAKI,EAC3C,UAAbN,EAAiCC,EAAMC,EAAVC,EAAjC,OAGJ,QAASI,UAASC,GACd,GAAInB,GAAO1C,EAAE,aACb0C,GAAKC,OAAOC,SACRC,UAAW7C,EAAE6D,GAAOJ,SAASC,KAC9B,OArMP1D,EAAE8D,UAAUC,MAAM,WACdpE,WACA+B,gBACAQ,aACAe,wBACAjD,EAAE,mDAAmDgE,OAAO,WACxDlE,QAAQC,IAAI,YACZ6D,SAAS,uBAGb5D,EAAE,iBAAiBiE,MAAM,WACrBnE,QAAQC,IAAI,WACZ6D,SAAS,uBAEb5D,EAAE,uBACGkE,OACGA,MAAOlE,EAAE,yBACTmE,SAAU,eACVC,GAAI,YA0FhBpE,EAAE8D,UAAUE,OAAO,WACff,yBAEJ,IAAIoB,eACAC,cAAe,EAAG,GAClBC,KAAM,WACFF,aAAaG,eAEjBA,YAAa,WACTH,aAAaF,SAAWnE,EAAEG,QAAQ0C,aAEtC4B,aAAc,WACVJ,aAAaC,aAAa,GAAKD,aAAaC,aAAa,GACzDD,aAAaC,aAAa,GAAKtE,EAAEG,QAAQ0C,YAAcwB,aAAaF,SAAW,GAAK,EACpFE,aAAaF,SAAWnE,EAAEG,QAAQ0C,YAClCwB,aAAaK,UAA6C,KAAjCL,aAAaC,aAAa,GAAY,OAAS,KACxED,aAAaM,WAAaN,aAAaC,aAAa,KAAOD,aAAaC,aAAa,IAEzFM,YAAa,WACTP,aAAaE,QAIrBvE,GAAE8D,UAAUC,MAAMM,aAAaE,MAC/BvE,EAAEG,QAAQ0E,OAAOR,aAAaO","file":"main.babeled.min.js","sourcesContent":["'use strict';\n\n$(document).ready(function () {\n    setLogin();\n    setReplistNav();\n    setInfoNav();\n    changeToolBarPosition();\n    $('#carousel-slide > .carousel-inner > .item > img').scroll(function () {\n        console.log('scrolled');\n        scrollTo('#home-info-center');\n    });\n\n    $('carousel-home').hover(function () {\n        console.log('hovered');\n        scrollTo('#home-info-center');\n    });\n    $('.user-button.button').popup({\n        popup: $('.user-ops-popup.popup'),\n        position: 'bottom right',\n        on: 'click'\n    });\n});\n\nfunction setLogin() {\n    if (Cookies.get('id')) {\n        console.log(Cookies.get('id'));\n        $('a.logout').click(function () {\n            Cookies.remove('id');\n            window.location = '/';\n        });\n        $('.user-access-btn').addClass('disabled');\n    } else {\n        if ($('form#signup')[0]) {\n            $('.signup-btn').click(function () {\n                var xhr = new XMLHttpRequest();\n                xhr.open('POST', '/signup');\n\n                xhr.onload = function () {\n\n                    var res = JSON.parse(xhr.responseText);\n                    console.log(res);\n                    if (res.status == '200 OK') {\n                        $('p.tip-message').text('注册成功').css({\n                            'background': 'rgba(55,222,88,0.4)',\n                            'color': 'green',\n                            'border': '2px solid green'\n                        });\n                        console.log(res);\n                        console.log(res.id);\n                        Cookies.set('id', res.id, { expires: 7 });\n                    } else {\n                        $('p.tip-message').text('注册失败').css({\n                            'background': 'rgba(222,55,88,0.4)',\n                            'color': 'red',\n                            'border': '2px solid red'\n                        });\n                    }\n                };\n                var formData = new FormData($('form#signup')[0]);\n                xhr.send(formData);\n            });\n        }\n    }\n}\n\nfunction setReplistNav() {\n    if (!$('.report-intro-list-nav')[0]) return;\n\n    var $list = $('.report-intro-list');\n    var listPos = function () {\n        var listLen = $('.report-intro-list .item').length;\n        var currentPos = 1;\n        return {\n            up: function up() {\n                if (currentPos > 2) {\n                    currentPos = currentPos - 2;\n                } else {\n                    currentPos = 1;\n                }\n                $list.css('transform', 'translateY(' + (1 - currentPos) * 108 + 'px)');\n            },\n\n            down: function down() {\n                if (listLen - currentPos > 2) {\n                    currentPos = currentPos + 2;\n                } else {\n                    currentPos = listLen - 1;\n                }\n                $list.css('transform', 'translateY(' + (1 - currentPos) * 108 + 'px)');\n            }\n        };\n    }();\n    var $up = $('.report-intro-list-nav.up').click(listPos.up);\n    var $down = $('.report-intro-list-nav.down').click(listPos.down);\n}\n\nfunction setInfoNav() {\n    if (!$('.info-center')[0]) return;\n    var $list = $('.info-content-list');\n    $('.service-menu .item').click(function () {\n        var width = $('.info-content').height();\n        console.log(width);\n        console.log($(this));\n        $list.css('transform', 'translateY(' + ($(this).data('index') - 1) * -255 + 'px)');\n    });\n};\n\n// changeHeaderOrNot();\n$(document).scroll(function () {\n    changeToolBarPosition();\n});\nvar scrollStatus = {\n    scrollRecord: [0, 0],\n    init: function init() {\n        scrollStatus.setPosition();\n    },\n    setPosition: function setPosition() {\n        scrollStatus.position = $(window).scrollTop();\n    },\n    recordScroll: function recordScroll() {\n        scrollStatus.scrollRecord[1] = scrollStatus.scrollRecord[0];\n        scrollStatus.scrollRecord[0] = $(window).scrollTop() > scrollStatus.position ? -1 : 1;\n        scrollStatus.position = $(window).scrollTop();\n        scrollStatus.direction = scrollStatus.scrollRecord[0] === -1 ? 'down' : 'up';\n        scrollStatus.continuous = scrollStatus.scrollRecord[0] === scrollStatus.scrollRecord[1];\n    },\n    adaptResize: function adaptResize() {\n        scrollStatus.init();\n    }\n};\n\n$(document).ready(scrollStatus.init);\n$(window).resize(scrollStatus.adaptResize);\n\nfunction toggleSidebar() {\n    $('.sidebar').sidebar('toggle');\n}\n\nfunction ScrollTop() {\n    var body = $(\"html, body\");\n    body.stop().animate({\n        scrollTop: 0\n    }, '500');\n}\n\nfunction showScrollTop() {\n    if (!checkVisible($('#top-indicator'))) {\n        $('#vertical-nv').removeClass(\"normal\").addClass(\"pinned\");\n        $('#scroll-top').removeClass(\"out\").addClass(\"in\");\n    } else {\n        $('#vertical-nv').removeClass(\"pinned\").addClass(\"normal\");\n        $('#scroll-top').removeClass(\"in\").addClass(\"out\");\n    }\n}\n\nfunction changeToolBarPosition() {\n    var $mceToolbar = $('.mce-toolbar-grp.mce-container.mce-panel.mce-stack-layout-item.mce-first');\n    var $editorOps = $('#ops');\n    if ($mceToolbar[0]) {\n        if (!checkVisible($('.mce-top-indicator'))) {\n            $mceToolbar.addClass(\"pinned\");\n        } else {\n            $mceToolbar.removeClass(\"pinned\");\n        }\n    }\n    if ($editorOps[0]) {\n        if (!checkVisible($('footer'))) {\n            $editorOps.addClass(\"pinned\");\n        } else {\n            $editorOps.removeClass(\"pinned\");\n        }\n    }\n}\n\nfunction checkVisible(elm, evalType) {\n    evalType = evalType || 'visible';\n\n    var vpH = $(window).height(),\n\n\n    // Viewport Height\n    st = $(window).scrollTop(),\n\n\n    // Scroll Top\n    y = $(elm).offset().top,\n        elementHeight = $(elm).height();\n\n    if (evalType === 'visible') return y < vpH + st && y > st - elementHeight;\n    if (evalType === 'above') return y < vpH + st;\n}\n\nfunction scrollTo(eleId) {\n    var body = $(\"html, body\");\n    body.stop().animate({\n        scrollTop: $(eleId).offset().top\n    }, '500');\n}","$(document).ready(function() {\r\n    setLogin();\r\n    setReplistNav();\r\n    setInfoNav();\r\n    changeToolBarPosition();\r\n    $('#carousel-slide > .carousel-inner > .item > img').scroll(function() {\r\n        console.log('scrolled');\r\n        scrollTo('#home-info-center');\r\n    });\r\n\r\n    $('carousel-home').hover(function() {\r\n        console.log('hovered');\r\n        scrollTo('#home-info-center');\r\n    });\r\n    $('.user-button.button')\r\n        .popup({\r\n            popup: $('.user-ops-popup.popup'),\r\n            position: 'bottom right',\r\n            on: 'click'\r\n        });\r\n});\r\n\r\nfunction setLogin() {\r\n    if (Cookies.get('id')) {\r\n        console.log(Cookies.get('id'));\r\n        $('a.logout').click(function() {\r\n            Cookies.remove('id');\r\n            window.location = '/';\r\n        });\r\n        $('.user-access-btn').addClass('disabled');\r\n    } else {\r\n        if ($('form#signup')[0]) {\r\n            $('.signup-btn').click(function() {\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.open('POST', '/signup');\r\n\r\n                xhr.onload = function() {\r\n\r\n                    var res = JSON.parse(xhr.responseText);\r\n                    console.log(res);\r\n                    if (res.status == '200 OK') {\r\n                        $('p.tip-message').text('注册成功').css({\r\n                            'background': 'rgba(55,222,88,0.4)',\r\n                            'color': 'green',\r\n                            'border': '2px solid green'\r\n                        });\r\n                        console.log(res);\r\n                        console.log(res.id);\r\n                        Cookies.set('id', res.id, { expires: 7 });\r\n                    } else {\r\n                        $('p.tip-message').text('注册失败').css({\r\n                            'background': 'rgba(222,55,88,0.4)',\r\n                            'color': 'red',\r\n                            'border': '2px solid red'\r\n                        })\r\n                    }\r\n                };\r\n                var formData = new FormData($('form#signup')[0]);\r\n                xhr.send(formData);\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nfunction setReplistNav() {\r\n    if (!$('.report-intro-list-nav')[0]) return;\r\n\r\n    var $list = $('.report-intro-list');\r\n    var listPos = function() {\r\n        var listLen = $('.report-intro-list .item').length;\r\n        var currentPos = 1;\r\n        return {\r\n            up: function() {\r\n                if (currentPos > 2) {\r\n                    currentPos = currentPos - 2;\r\n                } else {\r\n                    currentPos = 1;\r\n                }\r\n                $list.css('transform', 'translateY(' + (1 - currentPos) * 108 + 'px)');\r\n            },\r\n\r\n            down: function() {\r\n                if (listLen - currentPos > 2) {\r\n                    currentPos = currentPos + 2;\r\n                } else {\r\n                    currentPos = listLen - 1;\r\n                }\r\n                $list.css('transform', 'translateY(' + (1 - currentPos) * 108 + 'px)');\r\n            }\r\n        }\r\n    }();\r\n    var $up = $('.report-intro-list-nav.up').click(listPos.up);\r\n    var $down = $('.report-intro-list-nav.down').click(listPos.down);\r\n}\r\n\r\nfunction setInfoNav() {\r\n    if (!$('.info-center')[0]) return;\r\n    var $list = $('.info-content-list');\r\n    $('.service-menu .item').click(function() {\r\n        var width = $('.info-content').height();\r\n        console.log(width);\r\n        console.log($(this));\r\n        $list.css('transform', 'translateY(' + ($(this).data('index') - 1) * -255 + 'px)');\r\n    })\r\n\r\n};\r\n\r\n// changeHeaderOrNot();\r\n$(document).scroll(function() {\r\n    changeToolBarPosition();\r\n});\r\nvar scrollStatus = {\r\n    scrollRecord: [0, 0],\r\n    init: function init() {\r\n        scrollStatus.setPosition();\r\n    },\r\n    setPosition: function setPosition() {\r\n        scrollStatus.position = $(window).scrollTop();\r\n    },\r\n    recordScroll: function recordScroll() {\r\n        scrollStatus.scrollRecord[1] = scrollStatus.scrollRecord[0];\r\n        scrollStatus.scrollRecord[0] = $(window).scrollTop() > scrollStatus.position ? -1 : 1;\r\n        scrollStatus.position = $(window).scrollTop();\r\n        scrollStatus.direction = scrollStatus.scrollRecord[0] === -1 ? 'down' : 'up';\r\n        scrollStatus.continuous = scrollStatus.scrollRecord[0] === scrollStatus.scrollRecord[1];\r\n    },\r\n    adaptResize: function adaptResize() {\r\n        scrollStatus.init();\r\n    }\r\n};\r\n\r\n$(document).ready(scrollStatus.init);\r\n$(window).resize(scrollStatus.adaptResize);\r\n\r\n\r\nfunction toggleSidebar() {\r\n    $('.sidebar').sidebar('toggle');\r\n}\r\n\r\nfunction ScrollTop() {\r\n    var body = $(\"html, body\");\r\n    body.stop().animate({\r\n        scrollTop: 0\r\n    }, '500');\r\n}\r\n\r\nfunction showScrollTop() {\r\n    if (!checkVisible($('#top-indicator'))) {\r\n        $('#vertical-nv').removeClass(\"normal\").addClass(\"pinned\");\r\n        $('#scroll-top').removeClass(\"out\").addClass(\"in\");\r\n    } else {\r\n        $('#vertical-nv').removeClass(\"pinned\").addClass(\"normal\");\r\n        $('#scroll-top').removeClass(\"in\").addClass(\"out\");\r\n    }\r\n}\r\n\r\nfunction changeToolBarPosition() {\r\n    var $mceToolbar = $('.mce-toolbar-grp.mce-container.mce-panel.mce-stack-layout-item.mce-first');\r\n    var $editorOps = $('#ops');\r\n    if ($mceToolbar[0]) {\r\n        if (!checkVisible($('.mce-top-indicator'))) {\r\n            $mceToolbar.addClass(\"pinned\");\r\n        } else {\r\n            $mceToolbar.removeClass(\"pinned\");\r\n        }\r\n    }\r\n    if ($editorOps[0]) {\r\n        if (!checkVisible($('footer'))) {\r\n            $editorOps.addClass(\"pinned\");\r\n        } else {\r\n            $editorOps.removeClass(\"pinned\");\r\n        }\r\n    }\r\n}\r\n\r\nfunction checkVisible(elm, evalType) {\r\n    evalType = evalType || 'visible';\r\n\r\n    var vpH = $(window).height(),\r\n\r\n\r\n        // Viewport Height\r\n        st = $(window).scrollTop(),\r\n\r\n\r\n        // Scroll Top\r\n        y = $(elm).offset().top,\r\n        elementHeight = $(elm).height();\r\n\r\n    if (evalType === 'visible') return y < vpH + st && y > st - elementHeight;\r\n    if (evalType === 'above') return y < vpH + st;\r\n}\r\n\r\nfunction scrollTo(eleId) {\r\n    var body = $(\"html, body\");\r\n    body.stop().animate({\r\n        scrollTop: $(eleId).offset().top\r\n    }, '500');\r\n}\r\n"],"sourceRoot":"/source/"}