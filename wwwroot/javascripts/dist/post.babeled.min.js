"use strict";function initMce(t,e){var a=!1;e&&(a=!0),tinymce.init({selector:t,skin:"mxc1",language:"zh_CN",content_css:"/stylesheets/dist/travelogue.min.css",body_class:"travelogue",plugins:"table autoresize paste image imagetools preview",toolbar:"undo redo formatselect fontsizeselect bold italic underline strikethrough alignleft aligncenter alignright alignfull advlist lists link",image_caption:!0,paste_data_images:!0,fontsize_formats:"8pt 9pt 10pt 11pt 12pt 14pt 18pt 24pt",menubar:!1,images_upload_url:"/upload/images",statusbar:!1,min_height:480})}function uploadPic(){var t=$(this).next("img"),e=$(this).find("#pic-loader"),a=$(this).find("label"),n=$("<input>").attr({type:"file","class":"temp-input"}).css({display:"none",position:"absolute"}).change(function(){if(this.files&&this.files[0]){var n=new FileReader;n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(this.files[0]),a.removeClass("btn").addClass("pct");var i=function(t){var n=Math.ceil(100*t.loaded/t.total),i=100-n;e.css({height:i+"px"}),a.text(n+"%")},s=new XMLHttpRequest;s.withCredentials=!1,s.open("POST","/images"),s.onload=function(){var e=JSON.parse(s.responseText);console.log(e.location),t.attr("src",e.location),a.removeClass("pct").addClass("btn").text("change"),$(".temp-input").remove()},s.upload.addEventListener("progress",i,!1);var o=new FormData;o.append("image",this.files[0],this.files[0].name),s.send(o)}});$("body").append(n),n.click()}function uploadHero(){var t=$(".post-hero"),e=$("<input>").attr({type:"file","class":"temp-input"}).css({display:"none",position:"absolute"}).change(function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){t.css({background:'url("'+e.target.result+'")',"background-size":"cover"})},e.readAsDataURL(this.files[0]);var a=new XMLHttpRequest;a.withCredentials=!1,a.open("POST","/upload/images"),a.onload=function(){var e=JSON.parse(a.responseText);t.css({background:'url("'+e.location+'")',"background-size":"cover"}),$(".input-hero-img").val(e.location),console.log($(".input-hero-img").val()),$(".temp-input").remove()};var n=new FormData;n.append("image",this.files[0],this.files[0].name),a.send(n)}});$("body").append(e),e.click()}function computProgress(t){var e=Math.ceil(1e3*t.loaded/t.total)/10+"%";return e}function uploadPost(){}function GetCurrentDate(){var t=new Date,e=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getFullYear()+"-"+e+"-"+t.getDate();return a}function getQuoteText(t){var e="";return $(t).find("*").each(function(){return $(this).text().length>32?(e=$(this).text(),!1):void 0}),e}$(document).ready(function(){function t(){var t=this,e=$(t).next(".result");$.get("http://api.geonames.org/searchJSON?lang=ZH&username=zhouzoro&maxRows=10&q="+$(t).val(),function(t){e.empty(),0===t.geonames.length&&e.append("No Results Found");var a=!0,n=!1,i=void 0;try{for(var s,o=t.geonames[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value,r=$("<li>").attr("class","geoname-resultlist-item"),c=$("<a>").attr("data-id",l.geonameId).append($("<span>").attr("class","name").text(l.name)).append($("<span>").attr("class","toponymName").text("("+l.toponymName+")"));l.countryName&&""!==l.countryName&&c.append($("<span>").attr("class","countryName").text(", "+l.countryName)).append($("<span>").attr("class","toponymName").text("("+l.toponymName+")")),e.append(r.append(c))}}catch(p){n=!0,i=p}finally{try{!a&&o["return"]&&o["return"]()}finally{if(n)throw i}}})}initMce("#input-body"),$("#btn-img").click(function(){var t=$("<input>").attr({type:"file","class":"temp-input"}).css({display:"none",position:"absolute"}).change(function(){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(t){tinymce.activeEditor.execCommand("insertHTML",!1,'<img class="inline-img" src="'+t.target.result+'" width="100%" >'),tinymce.activeEditor.uploadImages()},t.readAsDataURL(this.files[0])}$(".temp-input").remove()});$("body").append(t),t.click()}),$(".geosearch").keyup(t).change(t)}),$(".add-btn").click(function(){var t=$("<div>").attr("class","expand-transition");$(this).append(t);var e=$(this).data("url"),a=$(this).data("type");$.get(e,function(e){$("#modal-cust").find(".container").html(e),$("#btn-cancel").click(function(){$("#body").show(),$("#modal-cust").hide("fast"),$("#modal-cust").find(".container").html("")}),$("#modal-cust").show("slow"),$("#body").hide("slow"),initUploadOf(a),t.remove(),$("#edit-pic").click(uploadPic)})});
//# sourceMappingURL=../maps/post.babeled.min.js.map
